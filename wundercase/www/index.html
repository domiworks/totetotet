<!DOCTYPE html>
<html>
<!--
  * Please see the included README.md file for license terms and conditions.
-->
<head>
	<title>Blank App Designer Project Template</title>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8">

	<!-- <meta name="viewport" content="width=device-width, initial-scale=1"> -->
	<!--<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">-->
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1" /> 
	<!-- <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes, minimum-scale=1, maximum-scale=2"> -->

	<style>
	@-ms-viewport { width: 100vw ; zoom: 100% ; }                           @viewport { width: 100vw ; zoom: 100% ; }
	@-ms-viewport { user-zoom: fixed ; }                                    @viewport { user-zoom: fixed ; }
	/*@-ms-viewport { user-zoom: zoom ; min-zoom: 100% ; max-zoom: 200% ; }   @viewport { user-zoom: zoom ; min-zoom: 100% ; max-zoom: 200% ; }*/
	</style>

	<link rel="stylesheet" href="css/all.css">

	<!-- Most third-party libraries should go here. References (below) are just examples to give you the general idea... -->
	<!-- <script src="lib/mc/hammer.js"></script> -->
	<!-- <script src="lib/ft/fastclick.js"></script> -->

	<script src="intelxdk.js"></script>         <!-- phantom library, needed for XDK "legacy" container api calls -->
	<script src="cordova.js"></script>          <!-- phantom library, needed for Cordova api calls -->
	<script src="xhr.js"></script>              <!-- phantom library, needed for XDK "legacy" container CORS -->

	<script src="js/app.js"></script>           <!-- for your event code, see README and file comments for details -->
	<script src="js/init-app.js"></script>      <!-- for your init code, see README and file comments for details -->
	<script src="xdk/init-dev.js"></script>     <!-- normalizes device and document ready events, see file for details -->

	<script src="js/jquery.easing.min.js"></script>     
	<script src="js/jquery-1.11.1.min.js"></script>    
	<script src="js/jquery-migrate-1.2.1.min.js"></script> 
    
	<script src="js/bootstrap.min.js"></script> 
    
	<!--<script>
        $('body').on('click','.procBut1',function(){
	
            $.ajax({
                dataType: 'json',
                type: 'GET',
                url:        'http://partners.api.skyscanner.net/apiservices/hotels/liveprices/v2/ID/IDR/id-ID/27539774/2014-12-04/2014-12-10/2/1?apiKey=ah395258861593902161819075536914',

                success: function(response){
                    alert('in');
                    //$('#namaHotel').text(response['hotels'][0]['name']);
                    var obj = response['hotels'];
                    //alert(obj);
                    var tes = "";
                    var idx = 0;
                    //alert('end 2');
                    var img = convertToText(response['hotels'][0]['images']);
                    var arr = img.split(":");
                   // alert(arr[0]);
                   // alert(arr[1]);
                    tes = "<img src='http://d1bko2jzh7ix12.cloudfront.net"+arr[0].substring(1,arr[0].length)+arr[1].trim().substring(1,arr[0].length)+"' />";
                    //alert(arr[0].substring(1,arr[0].length));
                    //alert(arr[1].substring(1,arr[0].length));
                    
                    //alert(tes);
                    //alert(response['hotels'][0]['images']);
                    $(obj).each(function(){
                        //alert('1');
                        tes = tes+"nama hotel : "+obj[idx].name+"<br />";
                        
                        //tes = tes + "gambar : "+obj[idx]['images'][0]+"<br />";
                        //alert(tes);
                        //alert('2');
                        //alert(idx);
                        idx++;
                    });
                    //alert(idx);
                      // alert(tes);               
                   //alert(response['hotels'][0]['name']);
                    $('#namaHotel').html(tes);
                    return true;
                },error: function(xhr, textStatus, errorThrown){
                    alert("readyState: "+xhr.readyState+"\nstatus: "+xhr.status);
                    alert("responseText: "+xhr.responseText);
                    alert(errorThrown);
                }
            },'json');

        });
        
        function convertToText(obj) 
		{
			//create an array that will later be joined into a string.
			var string = [];

			//is object
			//    Both arrays and objects seem to return "object"
			//    when typeof(obj) is applied to them. So instead
			//    I am checking to see if they have the property
			//    join, which normal objects don't have but
			//    arrays do.
			if (typeof(obj) == "object" && (obj.join == undefined)) 
			{
				string.push("{");
				for (prop in obj) {
					string.push(prop, ": ", convertToText(obj[prop]), ",");
				};
				string.push("}");

			//is array
			} else if (typeof(obj) == "object" && !(obj.join == undefined)) 
			{
				string.push("[")
				for(prop in obj) {
					string.push(convertToText(obj[prop]), ",");
				}
				string.push("]")

			//is function
			} else if (typeof(obj) == "function") 
			{
				string.push(obj.toString())

			//all other values can be done with JSON.stringify
			} else 
			{
				string.push(JSON.stringify(obj))
			}

			return string.join("")
		}
    </script>-->
</head>


<body>
	<section class="s_super_container">
		
		

		<section class="s_middle_display" style="">
			<div class="container-fluid" style="">
				<div class="row f_elast one" style="border-top: 1px solid #787878; position: relative; overflow-y: scroll; overflow-x: hidden;">
                    <div class="f_faker"></div>
                    <div class="col-lg-12">
						<div class="f_suggest_node form-horizontal ">
                              <div class="form-group">
                                <label for="" class="col-sm-2 control-label">Flight</label>
                                <div class="col-sm-10">
                                    <p class="form-control-static" id="">Hyperion</p>
                                </div>
                              </div>
                              <div class="form-group">
                                <label for="" class="col-sm-2 control-label">Hotel</label>
                                <div class="col-sm-10">
                                    <img id="oneonepic">
                                    <br />
                                    <p class="form-control-static" id="oneone">Hyperion</p>
                                </div>
                                  
                                  
                              </div>
                                
                        </div>
						<div class="f_suggest_node form-horizontal">
                              <div class="form-group">
                                <label for="" class="col-sm-2 control-label">Flight</label>
                                <div class="col-sm-10">
                                    <p class="form-control-static" id="">Hyperion</p>
                                </div>
                              </div>
                              <div class="form-group">
                                <label for="" class="col-sm-2 control-label">Hotel</label>
                                <div class="col-sm-10">
                                    <img id="onetwopic">
                                    <br />
                                    <p class="form-control-static" id="onetwo">Hyperion</p>
                                </div>
                                  
                                  
                              </div>
                        </div>
						
					</div>
				</div>
				<div class="row f_elast two" style="border-top: 1px solid #787878; position: relative; overflow-y: scroll; overflow-x: hidden;">
					<div class="f_faker"></div>
                    <div class="col-lg-12">
						<div class="f_suggest_node form-horizontal">
                              <div class="form-group">
                                <label for="" class="col-sm-2 control-label">Flight</label>
                                <div class="col-sm-10">
                                    <p class="form-control-static" id="">Hyperion</p>
                                </div>
                              </div>
                              <div class="form-group">
                                <label for="" class="col-sm-2 control-label">Hotel</label>
                                <div class="col-sm-10">
                                    <img id="twoonepic">
                                    <br />
                                    <p class="form-control-static" id="twoone">Hyperion</p>
                                </div>
                              </div>
                                
                        </div>
						<div class="f_suggest_node form-horizontal">
                              <div class="form-group">
                                <label for="" class="col-sm-2 control-label">Flight</label>
                                <div class="col-sm-10">
                                    <p class="form-control-static" id="">Hyperion</p>
                                </div>
                              </div>
                              <div class="form-group">
                                <label for="" class="col-sm-2 control-label">Hotel</label>
                                <div class="col-sm-10">
                                    <img id="twotwopic">
                                    <br />
                                    <p class="form-control-static" id="twotwo">Hyperion</p>
                                </div>
                              </div>
                                
                        </div>
					</div>
				</div>
				<div class="row f_elast three" style="border-top: 1px solid #787878; position: relative; overflow-y: scroll; overflow-x: hidden;">
					<div class="f_faker"></div>
                    <div class="col-lg-12">

						<div class="f_suggest_node form-horizontal">
                              <div class="form-group">
                                <label for="" class="col-sm-2 control-label">Flight</label>
                                <div class="col-sm-10">
                                    <p class="form-control-static" id="">Hyperion</p>
                                </div>
                              </div>
                              <div class="form-group">
                                <label for="" class="col-sm-2 control-label">Hotel</label>
                                <div class="col-sm-10">
                                    <img id="threeonepic">
                                    <br />
                                    <p class="form-control-static" id="threeone">Hyperion</p>
                                </div>
                              </div>
                                
                        </div>
						<div class="f_suggest_node form-horizontal">
                              <div class="form-group">
                                <label for="" class="col-sm-2 control-label">Flight</label>
                                <div class="col-sm-10">
                                    <p class="form-control-static" id="">Hyperion</p>
                                </div>
                              </div>
                              <div class="form-group">
                                <label for="" class="col-sm-2 control-label">Hotel</label>
                                <div class="col-sm-10">
                                    <img id="threetwopic">
                                    <br />
                                    <p class="form-control-static" id="threetwo">Hyperion</p>
                                </div>
                              </div>
                                
                        </div>
					</div>
				</div>
			</div>
		</section>
</section>
    <style>
        .unremoved{
            overflow: hidden;
        }
    </style>
		<script>
            var width = window.innerWidth;
            var height10 = window.innerHeight;
           // alert(height10);
			var height03 = (height10*0.33);
			var height08 = (height10*0.8);
			var height01 = (height10*0.1);
            
			$(document).ready(function(){
                $('.f_elast').height(height03);
                
                $('.f_elast').addClass('unremoved');
                $('.f_faker').height(height03).width(width).css('display','block').css('z-index','999').css('background-color','#213232').css('position','absolute').css('top','0px').css('left','0px');
            
            });	

			$('body').on('click', '.f_elast', function(){
				$(this).animate({
					height: height08
				}, 370, function() {

				});
                $(this).removeClass('unremoved');
                $(this).siblings('.f_elast').addClass('unremoved');
                $(this).siblings('.f_elast').children('.f_faker').css('display','block');
                
                $(this).children('.f_faker').css('display','none');

				$(this).siblings('.f_elast').animate({
					height: height01
				}, 370, function() {
				});
			});

		//new mlPushMenu( document.getElementById( 'mp-menu' ), document.getElementById( 'trigger' ) );



	      //Enable swiping...
	      

/*
	      var height = $(window).height();
	      var width = $(window).width();

	      function updateSize(){

			$('.s_super_container').height(height);
			$('.s_super_container').width(width);
			$('.s_left_display').height(height);
			$('.s_left_display').width(width);


			$('.s_middle_display').width(width);
			$('.s_middle_display').height(height);

			$('.s_left_display').css('left',-width);

			$('.s_sidebar_area').height(height);
			$('.s_sidebar_lv_1').height(height);

			$('.s_sidebar_close_area').width($('.s_left_display').width() - 300);
			$('.s_sidebar_close_area').height(height);

			
		};
		$(document).ready(updateSize);
		$(window).resize(updateSize);*/

            
            $(document).ready(function(){
            
                $.ajax({
                dataType: 'json',
                type: 'GET',
                url:        'http://partners.api.skyscanner.net/apiservices/hotels/liveprices/v2/ID/IDR/id-ID/27539774/2014-12-04/2014-12-10/2/1?apiKey=ah395258861593902161819075536914',

                success: function(response){
                    alert('in');
                    //$('#namaHotel').text(response['hotels'][0]['name']);
                    var obj = response['hotels'];
                    var obj2 = response['hotels_prices'];
                    
                    var obj3 = response['hotels_prices'][0];
                    var idx = 0;
                    var temp1 = response['hotels_prices'][0].agent_prices[0].price_total;
                    var temp2 = 1000000000;
                    var idtemp1 = 0;
                    var idtemp2;
                    var id1 = response['hotels_prices'][0].id;
                    var id2;
                    $(obj2).each(function(){
                    
                        if(idx != 0)
                        {
                            if(obj2[idx].agent_prices[0].price_total <= temp1)
                            {
                                temp2 = temp1;
                                id2 = id1;
                                idtemp2 = idtemp1;
                                temp1 = obj2[idx].agent_prices[0].price_total;
                                idtemp1 = idx;
                                id1 = response['hotels_prices'][idx].id;
                            }else if(obj2[idx].agent_prices[0].price_total <= temp2)
                            {
                                temp2 = obj2[idx].agent_prices[0].price_total;
                                idtemp2 = idx;
                                id2 = response['hotels_prices'][idx].id;
                            }
                        }
                        idx++;
                    });
                    //alert(obj2);
                    //alert(obj);
                    var tes = "";
                    var tes2 = "";
                    
                    var tes3 = "";
                    var tes4 = "";
                    
                    var tes5 = "";
                    var tes6 = "";
                    
                    var tess = "";
                    var tess2 = "";
                    
                    var tess3 = "";
                    var tess4 = "";
                    
                    var tess5 = "";
                    var tess6 = "";
                    
                    
                    //alert('end 2');
                    var img = convertToText(response['hotels'][0]['images']);
                    var arr = img.split(":");
                    var img2 = convertToText(response['hotels'][1]['images']);
                    var arr2 = img2.split(":");
                    
                    var img3 = convertToText(response['hotels'][2]['images']);
                    var arr3 = img.split(":");
                    var img4 = convertToText(response['hotels'][3]['images']);
                    var arr4 = img2.split(":");
                    
                    //price
                    var img5 = convertToText(response['hotels'][idtemp1]['images']);
                    var arr5 = img.split(":");
                    var img6 = convertToText(response['hotels'][idtemp2]['images']);
                    var arr6 = img2.split(":");
                   // alert(arr[0]);
                   // alert(arr[1]);
                    tess = tess + "http://d1bko2jzh7ix12.cloudfront.net"+arr[0].substring(1,arr[0].length)+arr[1].trim().substring(1,arr[1].length);
                    //alert(arr[0].substring(1,arr[0].length));
                    //alert(arr[1].substring(1,arr[0].length));
                    
                    //alert(tes);
                    //alert(response['hotels'][0]['images']);
                    //$(obj).each(function(){
                        //alert('1');
                        tes = tes+"nama hotel : "+obj[0].name+"<br />";
                        tes = tes+"harga : "+ toRp(obj2[0].agent_prices[0].price_total);+"<br />";
                        
                   
                    tess2 = tess2 + "http://d1bko2jzh7ix12.cloudfront.net"+arr2[0].substring(1,arr2[0].length)+arr2[1].trim().substring(1,arr2[1].length);
                    tes2 = tes2+"nama hotel : "+obj[1].name+"<br />";
                    tes2 = tes2+"harga : "+ toRp(obj2[1].agent_prices[0].price_total);+"<br />";
                        //tes = tes + "gambar : "+obj[idx]['images'][0]+"<br />";
                        //alert(tes);
                        //alert('2');
                        //alert(idx);
                      //  idx++;
                    //});
                    //alert(idx);
                      // alert(tes);               
                   //alert(response['hotels'][0]['name']);
                    
                    tess3 = tess3 + "http://d1bko2jzh7ix12.cloudfront.net"+arr3[0].substring(1,arr3[0].length)+arr3[1].trim().substring(1,arr3[1].length);
                    tes3 = tes3+"nama hotel : "+obj[2].name+"<br />";
                    tes3 = tes3+"harga : "+ toRp(obj2[2].agent_prices[0].price_total);+"<br />";
                    
                    tess4 = tess4 + "http://d1bko2jzh7ix12.cloudfront.net"+arr4[0].substring(1,arr4[0].length)+arr4[1].trim().substring(1,arr4[1].length);
                    tes4 = tes4+"nama hotel : "+obj[3].name+"<br />";
                    tes4 = tes4+"harga : "+ toRp(obj2[3].agent_prices[0].price_total);+"<br />";
                    
                    tess5 = tess5 + "http://d1bko2jzh7ix12.cloudfront.net"+arr5[0].substring(1,arr5[0].length)+arr5[1].trim().substring(1,arr5[1].length);
                    tes5 = tes5+"nama hotel : "+obj[idtemp1].name+"<br />";
                    tes5 = tes5+"harga : "+ toRp(obj2[idtemp1].agent_prices[0].price_total);+"<br />";
                    tes5 = tes5+"<input type='hidden' value='"+id1+"' >";
                    tes5 = tes5 + "<button class='but'>Pick</button>";
                    
                    tess6 = tess6 + "http://d1bko2jzh7ix12.cloudfront.net"+arr6[0].substring(1,arr6[0].length)+arr6[1].trim().substring(1,arr6[1].length);
                    tes6 = tes6+"nama hotel : "+obj[idtemp2].name+"<br />";
                    tes6 = tes6+"harga : "+ toRp(obj2[idtemp2].agent_prices[0].price_total);+"<br />";
                     tes6 = tes6+"<input type='hidden' value='"+id2+"' >";
                    tes6 = tes6 + "<a href='result.html?id=1' class='but'>Pick</a>";
                    
                    $('#oneone').html(tes);
                    $('#onetwo').html(tes2);
                    
                    $('#twoone').html(tes3);
                    $('#twotwo').html(tes4);
                    
                    $('#threeone').html(tes5);
                    $('#threetwo').html(tes6);
                    
                    $('#oneonepic').attr("src",tess);
                    $('#onetwopic').attr("src",tess2);
                    
                    $('#twoonepic').attr("src",tess3);
                    $('#twotwopic').attr("src",tess4);
                    
                    $('#threeonepic').attr("src",tess5);
                    $('#threetwopic').attr("src",tess6);
                    return true;
                },error: function(xhr, textStatus, errorThrown){
                    alert("readyState: "+xhr.readyState+"\nstatus: "+xhr.status);
                    alert("responseText: "+xhr.responseText);
                    alert(errorThrown);
                }
                },'json');
                
            });
            
            function convertToText(obj) 
            {
                //create an array that will later be joined into a string.
                var string = [];

                //is object
                //    Both arrays and objects seem to return "object"
                //    when typeof(obj) is applied to them. So instead
                //    I am checking to see if they have the property
                //    join, which normal objects don't have but
                //    arrays do.
                if (typeof(obj) == "object" && (obj.join == undefined)) 
                {
                    string.push("{");
                    for (prop in obj) {
                        string.push(prop, ": ", convertToText(obj[prop]), ",");
                    };
                    string.push("}");

                //is array
                } else if (typeof(obj) == "object" && !(obj.join == undefined)) 
                {
                    string.push("[")
                    for(prop in obj) {
                        string.push(convertToText(obj[prop]), ",");
                    }
                    string.push("]")

                //is function
                } else if (typeof(obj) == "function") 
                {
                    string.push(obj.toString())

                //all other values can be done with JSON.stringify
                } else 
                {
                    string.push(JSON.stringify(obj))
                }

                return string.join("")
            }
            
            function toRp(angka){
                var rev     = parseInt(angka, 10).toString().split('').reverse().join('');
                var rev2    = '';
                for(var i = 0; i < rev.length; i++){
                    rev2  += rev[i];
                    if((i + 1) % 3 === 0 && i !== (rev.length - 1)){
                        rev2 += '.';
                    }
                }
                return 'Rp ' + rev2.split('').reverse().join('')+',-';
                //return 'IDR ' + rev2.split('').reverse().join('') + ',00';
            }
            
            //$('body').on('click','.but',function(){
                //$.get('result.html', function(data)
                //{
                  //  data.find('.panel-body').text("jis");
                //    window.location = 'result.html';
                //});
               // window.location.assign("result.html?id="+$(this).prev().val();
                
           // });
		</script>
		<!-- IMPORTANT: Do not include your weinre script tag as part of your release builds! -->
		<!-- Place your remote debugging (weinre) script URL from the Test tab here, if it does not work above -->
		<!-- <script src="http://debug-software.intel.com/target/target-script-min.js#insertabiglongfunkynumberfromthexdkstesttab"></script> -->
        <!--<div id="namaHotel">asd</div>
        <button class="procBut1">Here</button>-->
	</body>
    
</html>
