<html lang="en"><head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>Result </title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
   

  </head>

  <body>
     
    <!-- Static navbar -->
    <nav class="navbar navbar-default navbar-static-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Wondercase</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse" aria-expanded="false" style="height: 1px;">
          <ul class="nav navbar-nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#contact">Contact</a></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Dropdown <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
                <li><a href="#">Action</a></li>
                <li><a href="#">Another action</a></li>
                <li><a href="#">Something else here</a></li>
                <li class="divider"></li>
                <li class="dropdown-header">Nav header</li>
                <li><a href="#">Separated link</a></li>
                <li><a href="#">One more separated link</a></li>
              </ul>
            </li>
          </ul>
         
        </div><!--/.nav-collapse -->
      </div>
    </nav>


    <div class="container">
	<div class="row-fluid">
	
	<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
  <div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingOne">
      <h4 class="panel-title">
        <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
          Flight
        </a>
      </h4>
    </div>
    <div id="collapseOne" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingOne">
      <div class="panel-body">
        Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
      </div>
    </div>
  </div>
  <div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingTwo">
      <h4 class="panel-title">
        <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
          Hotel
        </a>
      </h4>
    </div>
    <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
      <div class="panel-body hotel">
        <div class="panel-group" id="accordion2" role="tablist" aria-multiselectable="true">
  <div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingOne">
      <h4 class="panel-title">
        <a data-toggle="collapse" data-parent="#accordion2" href="#collapseOne2" aria-expanded="true" aria-controls="collapseOne">
          Detail
        </a>
      </h4>
    </div>
    <div id="collapseOne2" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingOne">
        <div class="panel-body detailHotel">
            
        </div>
    </div>
  </div>
  <div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingTwo">
      <h4 class="panel-title">
        <a class="collapsed" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo2" aria-expanded="false" aria-controls="collapseTwo">
          Amenities
        </a>
      </h4>
    </div>
    <div id="collapseTwo2" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
      <div class="panel-body amenitiesHotel">
        
      </div>
    </div>
  </div>
  <div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingThree">
      <h4 class="panel-title">
        <a class="collapsed" data-toggle="collapse" data-parent="#accordion2" href="#collapseThree2" aria-expanded="false" aria-controls="collapseThree">
         Comments
        </a>
      </h4>
    </div>
    <div id="collapseThree2" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
        <div class="panel-body commentshotel">
        
        </div>
    </div>
  </div>
</div>
      </div>
    </div>
  </div>
  <div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingThree">
      <h4 class="panel-title">
        <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
         Nearby Event
        </a>
      </h4>
    </div>
    <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
        <div class="panel-body">
           <ul>
            <li>Big Match Chelsea vs Arsenal @ The Ritz-Carlton Jakarta, Mega Kuningan 20.00 PM</li>
               <li>Art Exhibition by Barly @ Museum Seni Barly</li>
               <li>Gigantic Club Party @ Alexis Hotel Jakarta</li>
            </ul> 
        </div>
    </div>
  </div>
</div>
	
	</div>
<div class="row-fluid">
<div class="form-group">
  <label for="comment">Tell Your Friend via Migme:</label>
  <textarea class="form-control" rows="5" id="comment"></textarea>
  
  <button class="btn btn-default" id="migmeSay">Tell Your Friend</button>
    <script>
      
    </script>
</div>
</div>
<div class="row-fluid">

<div class="btn-group btn-group-lg" role="group" style="text-align:center;">
<button class="btn btn-info" style="display:block;float:none;margin-left:auto;margin-right:auto;" ><a href="paypal_index.php">CHECK OUT</a></button>
</div>
</div>
    </div> <!-- /container -->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
      <script>$('#accordion2').collapse({
  toggle: false
});</script></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script>
    
        function getParameterByName(name) 
        {
            name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
            var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
                results = regex.exec(location.search);
            return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
        }
        
        $(document).ready(function(){
        
            var a = getParameterByName('id');
           // alert(a);
            var b = getParameterByName('url');
           // alert(b);
            
            $.ajax({
                dataType: 'json',
                type: 'GET',
                url: 'http://partners.api.skyscanner.net'+b+'&hotelIds='+a,

                success: function(response){
                    var det = "";
                    var img = convertToText(response['hotels'][0]['images']);
                    var arr = img.split(":");
                    det = det + "<img src='http://d1bko2jzh7ix12.cloudfront.net"+arr[0].substring(1,arr[0].length)+arr[1].trim().substring(1,arr[1].length)+"' > <br>";
                    det = det + response['hotels'][0].name+"<br>";
                    det = det + "Price per night "+ toRp(response['hotels_prices'][0].agent_prices[0].price_per_room_night)+"<br>";
                    det = det + "Total "+ toRp(response['hotels_prices'][0].agent_prices[0].price_total)+"<br>";
                    //det = det + response['hotels_prices']['room_offers'][0]['rooms'].name+"<br>";
                     det = det + response['hotels'][0].description+"<br>";
                    $('.detailHotel').html(det);
                    var ame = "";
                    ame = ame + "- "+ response['amenities'][9].name + "<br>";
                    ame = ame + "- "+response['amenities'][11].name + "<br>";
                    ame = ame + "- "+response['amenities'][7].name + "<br>";
                    ame = ame + "- "+response['amenities'][5].name + "<br>";
                    ame = ame + "- "+response['amenities'][24].name + "<br>";
                    $('.amenitiesHotel').html(ame);
                    var com = "";
                    com = com + response['hotels_prices'][0]['ratings'][0].name + " - "+response['hotels_prices'][0]['ratings'][0].score+"<br>"+  response['hotels_prices'][0]['ratings'][0].examples+"<br>";
                    com = com + response['hotels_prices'][0]['ratings'][1].name + " - "+response['hotels_prices'][0]['ratings'][1].score+"<br>"+  response['hotels_prices'][0]['ratings'][1].examples+"<br>";
                    com = com + response['hotels_prices'][0]['ratings'][2].name + " - "+response['hotels_prices'][0]['ratings'][2].score+"<br>"+  response['hotels_prices'][0]['ratings'][2].examples+"<br>";
                    com = com + response['hotels_prices'][0]['ratings'][3].name + " - "+response['hotels_prices'][0]['ratings'][3].score+"<br>"+  response['hotels_prices'][0]['ratings'][3].examples+"<br>";
                    com = com + response['hotels_prices'][0]['ratings'][4].name + " - "+response['hotels_prices'][0]['ratings'][4].score+"<br>"+  response['hotels_prices'][0]['ratings'][4].examples+"<br>";
                    com = com + response['hotels_prices'][0]['ratings'][5].name + " - "+response['hotels_prices'][0]['ratings'][5].score+"<br>"+  response['hotels_prices'][0]['ratings'][5].examples+"<br>";
                    $('.commentshotel').html(com); 
                return true;
                },error: function(xhr, textStatus, errorThrown){
                    alert("readyState: "+xhr.readyState+"\nstatus: "+xhr.status);
                    alert("responseText: "+xhr.responseText);
                    alert(errorThrown);
                }
            },'json');
        });
        function toRp(angka){
                var rev     = parseInt(angka, 10).toString().split('').reverse().join('');
                var rev2    = '';
                for(var i = 0; i < rev.length; i++){
                    rev2  += rev[i];
                    if((i + 1) % 3 === 0 && i !== (rev.length - 1)){
                        rev2 += '.';
                    }
                }
                return 'Rp ' + rev2.split('').reverse().join('')+',-';
                //return 'IDR ' + rev2.split('').reverse().join('') + ',00';
        }
        
        function convertToText(obj) 
        {
            //create an array that will later be joined into a string.
            var string = [];

            //is object
            //    Both arrays and objects seem to return "object"
            //    when typeof(obj) is applied to them. So instead
            //    I am checking to see if they have the property
            //    join, which normal objects don't have but
            //    arrays do.
            if (typeof(obj) == "object" && (obj.join == undefined)) 
            {
                string.push("{");
                for (prop in obj) {
                    string.push(prop, ": ", convertToText(obj[prop]), ",");
                };
                string.push("}");

            //is array
            } else if (typeof(obj) == "object" && !(obj.join == undefined)) 
            {
                string.push("[");
                for(prop in obj) {
                    string.push(convertToText(obj[prop]), ",");
                }
                string.push("]");

            //is function
            } else if (typeof(obj) == "function") 
            {
                string.push(obj.toString());

            //all other values can be done with JSON.stringify
            } else 
            {
                string.push(JSON.stringify(obj));
            }

            return string.join("");
        }
    </script>
    <script>
    $('body').on('click', '#migmeSay', function()
        {
          $.oauth2({
             auth_url: 'https://oauth.mig.me/oauth/auth', // required
             response_type: 'code', // required
             token_url: 'https://oauth.mig.me/oauth/token', // required if response_type = 'code'
             logout_url: '', // recommended if available
             client_id: '8a27481f9a124bb79ef7fb3abcafd94d', // required
             client_secret: '{client_secret}', // required if response_type = 'code'
             redirect_uri: 'http://localhost:8080/oauth/callback', // required - some dummy url
             other_params: {'scope':'miniblog'}// optional params object for scope, state, display...
             }, function(token, response){
                 $.ajax({
                    type : 'POST',
                    contentType: 'application/json',
                    url : 'https://mig.me/datasvc/API/post/create',
                    data : {
                        'body' : 'testing post',
                        'privacy' : '0',
                        'reply_permission' : '0',
                        'originality' : '1',
                        '_version' : '1.0',
                        'location' : {
                            'latitude' : '0.0',
                            'longitude' : '0,0'
                        },
                        'displayName' : 'test'
                    },
                    success : function(response)
                    {  
                       //alert("bebek"); 
                       
                    },
                    error : function(xhr, textStatus, errorThrown){
                        //alert(xhr.responseText + " c " + xhr.readyState + " " + errorThrown);
                    },
                    beforeSend: function(xhr, settings) 
                    { 
                        xhr.setRequestHeader('Authorization','Bearer ' + token);
                        //alert("bebek");
                    }
                },'json');

             // do something with token and response
             }, function(error){
                //alert(error);
             // do something with error
             });
      });
        </script>
      <script>
(function($){
$.oauth2 = function (options, successCallback, errorCallback) {
// checks if all the required oauth2 params are defined
var checkOauth2Params = function(options){
var missing = "";
if(!options.client_id) {missing += " client_id"}
if(!options.auth_url) {missing += " auth_url"}
if(!options.response_type) {missing += " response_type"}
if(!options.client_secret && options.response_type == "code") {missing += " client_secret"}
if(!options.token_url && options.response_type == "code") {missing += " token_url"}
if(!options.redirect_uri) {missing += " redirect_uri"}
if(missing){
var error_msg = "Oauth2 parameters missing:" + missing;
errorCallback(error_msg, {error:error_msg});
//alert(error_msg);
return false;
} else {

return true;
}
}
// performs logout after oauth redirect
var oauth2Logout = function(options){
if(options.logout_url){
var s = document.createElement("script");
s.src = options.logout_url;
$("head").append(s);
}
}
// String prototype to parse and get url params
String.prototype.getParam = function( str ){
str = str.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
var regex = new RegExp( "[\\?&]*"+str+"=([^&#]*)" );
var results = regex.exec( this );
if( results == null ){
return "";
} else {
return results[1];
}
}
// if params missing return
if(!checkOauth2Params(options)) return;
// build oauth login url
var paramObj = {
client_id: options.client_id,
redirect_uri: options.redirect_uri,
response_type: options.response_type
};
$.extend(paramObj, options.other_params);
var login_url = options.auth_url + '?' + $.param(paramObj);
// open Cordova inapp-browser with login url
var loginWindow = window.open(login_url, '_blank', 'location=yes');
// check if redirect url has code, access_token or error
$(loginWindow).on('loadstart', function(e) {
var url = e.originalEvent.url;
// if authorization code method check for code/error in url param
if(options.response_type == "code"){
url = url.split("#")[0];
var code = url.getParam("code");
var error = url.getParam("error");
if (code || error){
loginWindow.close();
oauth2Logout(options);
if (code) {
$.ajax({
url: options.token_url,
data: {code:code, client_id:options.client_id, client_secret:options.client_secret, redirect_uri:options.redirect_uri, grant_type:"authorization_code"},
type: 'POST',
success: function(data){
var access_token;
if((data instanceof Object)){
access_token = data.access_token;
} else {
access_token = data.getParam("access_token");

}
successCallback(access_token, data);
},
error: function(error){
errorCallback(error, error);
}
});
} else if (error) {
errorCallback(error, url.split("?")[1]);
}
}
// if implicit method check for acces_token/error in url hash fragment
} else if(options.response_type == "token") {
var access_token = url.split("access_token=")[1];
var error = url.split("error=")[1];
if(access_token || error){
loginWindow.close();
oauth2Logout(options);
if(access_token){
successCallback(access_token, url.split("#")[1]);
} else if(error){
errorCallback(error, url.split("#")[1]);
}
}
}
});
};
}(jQuery));
</script>

</body></html>